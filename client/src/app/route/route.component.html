<header>
 <p></p>
</header>
<section>
  <div class="wrapper">
    <h1 class="route-form-title"> Search for routes </h1>
    <form class="route-form" (ngSubmit)="searchRoutes(myForm)" #myForm="ngForm">
      <md-input-container>
        <input mdInput ngui-auto-complete [(ngModel)]="from" [source]="worldAirports" placeholder="From" name="from" [max-num-list]="10" required>
        <md-error>This field is required</md-error>
      </md-input-container>
      <md-input-container>
        <input mdInput ngui-auto-complete [(ngModel)]="to" [source]="veAirports" placeholder="To" name="to" [max-num-list]="5" required>
        <md-error>This field is required</md-error>
      </md-input-container>
      <md-input-container>
        <input mdInput [(ngModel)]="date" [mdDatepicker]="picker" placeholder="Choose a date" name="date" required>
        <button mdSuffix [mdDatepickerToggle]="picker"></button>
        <md-error>This field is required</md-error>
      </md-input-container>
      <md-datepicker #picker></md-datepicker>
      <button md-raised-button type="submit" class="search"> search </button>
    </form>
  </div>
  <div class="flex-container wrap">
    <md-card class="flex-item" *ngFor="let route of routesData">
      <md-card-header>
        <div md-card-avatar class="header-image"></div>
        <md-card-title class="username"><a [routerLink]="['/user', route.route.creator_id._id]"></a>{{route.route.creator_id.name}}</md-card-title>
        <md-card-subtitle class="rating">
          <div class="star-icon"></div>
          <span *ngIf="route.route.creator_id.ratingTotal">{{route.route.creator_id.ratingTotal/route.ratings.length}}/5</span>
          <span *ngIf="!route.route.creator_id.ratingTotal">0/5</span>
          - {{route.ratings.length}} reviews
        </md-card-subtitle>
        <md-card-subtitle>
          <img *ngIf="route.route.creator_id.badges[0].active" src="{{route.route.creator_id.badges[0].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[1].active" src="{{route.route.creator_id.badges[1].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[2].active" src="{{route.route.creator_id.badges[2].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[3].active" src="{{route.route.creator_id.badges[3].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[4].active" src="{{route.route.creator_id.badges[4].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[5].active" src="{{route.route.creator_id.badges[5].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[6].active" src="{{route.route.creator_id.badges[6].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[7].active" src="{{route.route.creator_id.badges[7].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[8].active" src="{{route.route.creator_id.badges[8].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[9].active" src="{{route.route.creator_id.badges[9].img}}" alt="">
          <img *ngIf="route.route.creator_id.badges[10].active" src="{{route.route.creator_id.badges[10].img}}" alt="">
        </md-card-subtitle>
      </md-card-header>
      <md-card-content>
        <div class="entire-route">
          <div class="route">
            <span class="airplane takeoff"></span>
            {{route.route.from}}
          </div>
          <div class="route">
            <span class="airplane landing"></span>
            {{route.route.to}}
          </div>
        </div>
        <p class="route-date">{{route.route.date | date:'fullDate'}}</p>
      </md-card-content>
      <md-card-actions>
        <p class="petitions">{{route.petitions.length}} Petitions</p>
        <span *ngIf="session.user">
          <button *ngIf="route.route.creator_id._id !== session.user._id" class="action" (click)="newPetition(route.route._id, $event)">Make a petition</button>
        </span>
        <span *ngIf="!session.user">
          <button class="action" [routerLink]="['login']">Make a petition</button>
        </span>

      </md-card-actions>
    </md-card>
  </div>
</section>
<div class="info">
  <div class="wrapper">
    <div class="info-content">
      <div class="info-section">
        <img src="/assets/icons/shield.svg" alt="">
        <div class="info-section-title">Viaja super guay y seguro</div>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. </p>
      </div>
      <div class="info-section">
        <img src="/assets/icons/pulse.svg" alt="">
        <div class="info-section-title">Viaja super guay y seguro</div>
        <p>Lorem ipsum dolor sit amet. Eos reprehenderit nemo minima dolor, corrupti numquam! Magni iusto praesentium sed ab, aperiam ut eum, eligendi.</p>
      </div>
      <div class="info-section">
        <img src="/assets/icons/fast-forward.svg" alt="">
        <div class="info-section-title">Viaja super guay y seguro</div>
        <p>Eos reprehenderit nemo minima dolor, corrupti numquam! Magni iusto praesentium sed ab, aperiam ut eum, eligendi, voluptates placeat libero.</p>
      </div>
    </div>
  </div>
</div>
